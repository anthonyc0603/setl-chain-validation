# Validation node
The validation node is a spring boot based executable, which implements a full validation node.

## Usage
The application is packaged in a thick jar (with all required libraries), and can be run by
java -jar chain-node-validation.jar parameters

## Parameters
<pre>
--wallet=wallet-4.dat //The wallet file that will be used (relative to basedir)
--chainid=16 
--sourcenodeid=0 
--basedir=/setl/testnets_new/16/  
--statemode=mono  //Select between monolithic and ipfs state implementations.
--server.port=8090 //The port number used by the integrated webserver.
--p2p.listen.port=33410 
--p2p.peer.host=localhost 
--p2p.peer.port=13400
--nodename=wibble
[--transport=netty] //If set to netty, simple netty transport will be used.
[--proposaldisabled=false] //If true, no proposals will be generated by this node.
[--txexecutorpoolsize=8] //Number of threads processing incoming transactions.
[--txexecutorqueuesize=1000] //Number of incoming transactions that will queue before causing connection to block.
[--nostart=false] //If true, validation node will not start, but web interface will be active.
[--logfilename=valnode] //Passed as a sytem parameter to logging system. ONLY VALID ON COMMAND LINE
[--sigcheckmultithread=false] //If true, multi thread signature checking in proposal
</pre>

## Spring parameters
--logging.config=path
--logging.config=classpath:log4j2-spring-sample.xml
--

sourcenodeid is the node from which initial state and sqlite data are loaded. No data is modified in this folder.
nodename is the value passed as the node name in the proposal
wallet is the 0 based index of the wallet file found. i.e. if only the wallet files wallet-0.dat, wallet-2.dat, and wallet-9.dat, these will have indexes of 0, 1, 2 respectively.

## Migration
<pre>
The java equiv command line to
 
python /setl/setl_chain/main.py --configfile /setl/testnets_new/2600/setl0.config --peer 127.0.0.1:13510 --heartbeat yes
is
java -jar /usr/local/jar/chain-node-validation-0.1-RC.jar --logging.config=/setl/testnets_new/2600/log4j2-0.xml --spring.config.location=/setl/testnets_new/2600/setl0.properties --p2p.peer.host=127.0.0.1 --p2p.peer.port=13510
 
where the /setl/testnets_new/2600/setl0.config has also been migrated to /setl/testnets_new/2600/setl0.properties
 
and /setl/testnets_new/2600/log4j2-0.xml should be modified to provide log rotation (rather than console at the moment)
</pre>